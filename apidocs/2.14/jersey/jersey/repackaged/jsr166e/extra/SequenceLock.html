<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sat Dec 13 20:04:54 MET 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>SequenceLock (Jersey 2.14 API)</title>
<meta name="date" content="2014-12-13">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SequenceLock (Jersey 2.14 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SequenceLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../jersey/repackaged/jsr166e/extra/ReadMostlyVector.Action.html" title="interface in jersey.repackaged.jsr166e.extra"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?jersey/repackaged/jsr166e/extra/SequenceLock.html" target="_top">Frames</a></li>
<li><a href="SequenceLock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">jersey.repackaged.jsr166e.extra</div>
<h2 title="Class SequenceLock" class="title">Class SequenceLock</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>jersey.repackaged.jsr166e.extra.SequenceLock</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">SequenceLock</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></pre>
<div class="block">A reentrant mutual exclusion <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> in which each lock
 acquisition or release advances a sequence number.  When the
 sequence number (accessible using <a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#getSequence()"><code>getSequence()</code></a>) is odd,
 the lock is held. When it is even (i.e., (<code>lock.getSequence()
 &amp; 1L) == 0L</code>), the lock is released. Method <a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#awaitAvailability()"><code>awaitAvailability()</code></a> can be used to await availability of the lock,
 returning its current sequence number. Sequence numbers (as well as
 reentrant hold counts) are of type <code>long</code> to ensure that they
 will not wrap around until hundreds of years of use under current
 processor rates.  A SequenceLock can be created with a specified
 number of spins. Attempts to acquire the lock in method <a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#lock()"><code>lock()</code></a> will retry at least the given number of times before
 blocking. If not specified, a default, possibly platform-specific,
 value is used.

 <p>Except for the lack of support for specified fairness policies,
 or <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Condition</code></a> objects, a SequenceLock can be used in the
 same way as <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>ReentrantLock</code></a>. It provides similar status and
 monitoring methods, such as <a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#isHeldByCurrentThread()"><code>isHeldByCurrentThread()</code></a>.
 SequenceLocks may be preferable in contexts in which multiple
 threads invoke short read-only methods much more frequently than
 fully locked methods.

 <p>Methods <code>awaitAvailability</code> and <code>getSequence</code> can
 be used together to define (partially) optimistic read-only methods
 that are usually more efficient than ReadWriteLocks when they
 apply.  These methods should in general be structured as loops that
 await lock availability, then read <code>volatile</code> fields into
 local variables (and may further read other values derived from
 these, for example the <code>length</code> of a <code>volatile</code> array),
 and retry if the sequence number changed while doing so.
 Alternatively, because <code>awaitAvailability</code> accommodates
 reentrancy, a method can retry a bounded number of times before
 switching to locking mode.  While conceptually straightforward,
 expressing these ideas can be verbose. For example:

  <pre> <code>class Point {
   private volatile double x, y;
   private final SequenceLock sl = new SequenceLock();

   // an exclusively locked method
   void move(double deltaX, double deltaY) {
     sl.lock();
     try {
       x += deltaX;
       y += deltaY;
     } finally {
       sl.unlock();
     }
   }

   // A read-only method
   double distanceFromOriginV1() {
     double currentX, currentY;
     long seq;
     do {
       seq = sl.awaitAvailability();
       currentX = x;
       currentY = y;
     } while (sl.getSequence() != seq); // retry if sequence changed
     return Math.sqrt(currentX * currentX + currentY * currentY);
   }

   // Uses bounded retries before locking
   double distanceFromOriginV2() {
     double currentX, currentY;
     long seq;
     int retries = RETRIES_BEFORE_LOCKING; // for example 8
     try {
       do {
         if (--retries &lt; 0)
           sl.lock();
         seq = sl.awaitAvailability();
         currentX = x;
         currentY = y;
       } while (sl.getSequence() != seq);
     } finally {
       if (retries &lt; 0)
         sl.unlock();
     }
     return Math.sqrt(currentX * currentX + currentY * currentY);
   }
 }</code></pre></div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>1.8</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Doug Lea</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../serialized-form.html#jersey.repackaged.jsr166e.extra.SequenceLock">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#SequenceLock()">SequenceLock</a></strong>()</code>
<div class="block">Creates an instance of <code>SequenceLock</code> with the default
 number of retry attempts to acquire the lock before blocking.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#SequenceLock(int)">SequenceLock</a></strong>(int&nbsp;spins)</code>
<div class="block">Creates an instance of <code>SequenceLock</code> that will retry
 attempts to acquire the lock at least the given number of times
 before blocking.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#awaitAvailability()">awaitAvailability</a></strong>()</code>
<div class="block">Returns the current sequence number when the lock is, or
 becomes, available.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#getHoldCount()">getHoldCount</a></strong>()</code>
<div class="block">Queries the number of holds on this lock by the current thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a></code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#getOwner()">getOwner</a></strong>()</code>
<div class="block">Returns the thread that currently owns this lock, or
 <code>null</code> if not owned.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#getQueuedThreads()">getQueuedThreads</a></strong>()</code>
<div class="block">Returns a collection containing threads that may be waiting to
 acquire this lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#getQueueLength()">getQueueLength</a></strong>()</code>
<div class="block">Returns an estimate of the number of threads waiting to
 acquire this lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#getSequence()">getSequence</a></strong>()</code>
<div class="block">Returns the current sequence number of this lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#hasQueuedThread(java.lang.Thread)">hasQueuedThread</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread)</code>
<div class="block">Queries whether the given thread is waiting to acquire this
 lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#hasQueuedThreads()">hasQueuedThreads</a></strong>()</code>
<div class="block">Queries whether any threads are waiting to acquire this lock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#isHeldByCurrentThread()">isHeldByCurrentThread</a></strong>()</code>
<div class="block">Queries if this lock is held by the current thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#isLocked()">isLocked</a></strong>()</code>
<div class="block">Queries if this lock is held by any thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#lock()">lock</a></strong>()</code>
<div class="block">Acquires the lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#lockInterruptibly()">lockInterruptibly</a></strong>()</code>
<div class="block">Acquires the lock unless the current thread is
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupted</a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html?is-external=true" title="class or interface in java.util.concurrent.locks">Condition</a></code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#newCondition()">newCondition</a></strong>()</code>
<div class="block">Throws UnsupportedOperationException.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#toString()">toString</a></strong>()</code>
<div class="block">Returns a string identifying this lock, as well as its lock state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#tryAwaitAvailability(long, java.util.concurrent.TimeUnit)">tryAwaitAvailability</a></strong>(long&nbsp;timeout,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Returns the current sequence number if the lock is, or
 becomes, available within the specified waiting time.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#tryLock()">tryLock</a></strong>()</code>
<div class="block">Acquires the lock only if it is not held by another thread at the time
 of invocation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#tryLock(long, java.util.concurrent.TimeUnit)">tryLock</a></strong>(long&nbsp;timeout,
       <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Acquires the lock if it is not held by another thread within the given
 waiting time and the current thread has not been
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupted</a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../jersey/repackaged/jsr166e/extra/SequenceLock.html#unlock()">unlock</a></strong>()</code>
<div class="block">Attempts to release this lock.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SequenceLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SequenceLock</h4>
<pre>public&nbsp;SequenceLock()</pre>
<div class="block">Creates an instance of <code>SequenceLock</code> with the default
 number of retry attempts to acquire the lock before blocking.</div>
</li>
</ul>
<a name="SequenceLock(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SequenceLock</h4>
<pre>public&nbsp;SequenceLock(int&nbsp;spins)</pre>
<div class="block">Creates an instance of <code>SequenceLock</code> that will retry
 attempts to acquire the lock at least the given number of times
 before blocking.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>spins</code> - the number of times before blocking</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSequence</h4>
<pre>public&nbsp;long&nbsp;getSequence()</pre>
<div class="block">Returns the current sequence number of this lock.  The sequence
 number is advanced upon each acquire or release action. When
 this value is odd, the lock is held; when even, it is released.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the current sequence number</dd></dl>
</li>
</ul>
<a name="awaitAvailability()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitAvailability</h4>
<pre>public&nbsp;long&nbsp;awaitAvailability()</pre>
<div class="block">Returns the current sequence number when the lock is, or
 becomes, available. A lock is available if it is either
 released, or is held by the current thread.  If the lock is not
 available, the current thread becomes disabled for thread
 scheduling purposes and lies dormant until the lock has been
 released by some other thread.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the current sequence number</dd></dl>
</li>
</ul>
<a name="tryAwaitAvailability(long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryAwaitAvailability</h4>
<pre>public&nbsp;long&nbsp;tryAwaitAvailability(long&nbsp;timeout,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></pre>
<div class="block">Returns the current sequence number if the lock is, or
 becomes, available within the specified waiting time.

 <p>If the lock is not available, the current thread becomes
 disabled for thread scheduling purposes and lies dormant until
 one of three things happens:

 <ul>

 <li>The lock becomes available, in which case the current
 sequence number is returned.

 <li>Some other thread <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupts</a>
 the current thread, in which case this method throws
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang"><code>InterruptedException</code></a>.

 <li>The specified waiting time elapses, in which case
 this method throws <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent"><code>TimeoutException</code></a>.

 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - the time to wait for availability</dd><dd><code>unit</code> - the time unit of the timeout argument</dd>
<dt><span class="strong">Returns:</span></dt><dd>the current sequence number if the lock is available
         upon return from this method</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code> - if the lock was not available within
 the specified waiting time</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if the time unit is null</dd></dl>
</li>
</ul>
<a name="lock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lock</h4>
<pre>public&nbsp;void&nbsp;lock()</pre>
<div class="block">Acquires the lock.

 <p>If the current thread already holds this lock then the hold count
 is incremented by one and the method returns immediately without
 incrementing the sequence number.

 <p>If this lock not held by another thread, this method
 increments the sequence number (which thus becomes an odd
 number), sets the lock hold count to one, and returns
 immediately.

 <p>If the lock is held by another thread then the current
 thread may retry acquiring this lock, depending on the <code>spin</code> count established in constructor.  If the lock is still
 not acquired, the current thread becomes disabled for thread
 scheduling purposes and lies dormant until enabled by
 some other thread releasing the lock.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true#lock()" title="class or interface in java.util.concurrent.locks">lock</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></dd>
</dl>
</li>
</ul>
<a name="lockInterruptibly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockInterruptibly</h4>
<pre>public&nbsp;void&nbsp;lockInterruptibly()
                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Acquires the lock unless the current thread is
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupted</a>.

 <p>If the current thread already holds this lock then the hold count
 is incremented by one and the method returns immediately without
 incrementing the sequence number.

 <p>If this lock not held by another thread, this method
 increments the sequence number (which thus becomes an odd
 number), sets the lock hold count to one, and returns
 immediately.

 <p>If the lock is held by another thread then the current
 thread may retry acquiring this lock, depending on the <code>spin</code> count established in constructor.  If the lock is still
 not acquired, the current thread becomes disabled for thread
 scheduling purposes and lies dormant until one of two things
 happens:

 <ul>

 <li>The lock is acquired by the current thread; or

 <li>Some other thread <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupts</a> the
 current thread.

 </ul>

 <p>If the lock is acquired by the current thread then the lock hold
 count is set to one and the sequence number is incremented.

 <p>If the current thread:

 <ul>

 <li>has its interrupted status set on entry to this method; or

 <li>is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupted</a> while acquiring
 the lock,

 </ul>

 then <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang"><code>InterruptedException</code></a> is thrown and the current thread's
 interrupted status is cleared.

 <p>In this implementation, as this method is an explicit
 interruption point, preference is given to responding to the
 interrupt over normal or reentrant acquisition of the lock.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true#lockInterruptibly()" title="class or interface in java.util.concurrent.locks">lockInterruptibly</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted</dd></dl>
</li>
</ul>
<a name="tryLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLock</h4>
<pre>public&nbsp;boolean&nbsp;tryLock()</pre>
<div class="block">Acquires the lock only if it is not held by another thread at the time
 of invocation.

 <p>If the current thread already holds this lock then the hold
 count is incremented by one and the method returns <code>true</code>
 without incrementing the sequence number.

 <p>If this lock not held by another thread, this method
 increments the sequence number (which thus becomes an odd
 number), sets the lock hold count to one, and returns <code>true</code>.

 <p>If the lock is held by another thread then this method
 returns <code>false</code>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true#tryLock()" title="class or interface in java.util.concurrent.locks">tryLock</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the lock was free and was acquired by the
         current thread, or the lock was already held by the current
         thread; and <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="tryLock(long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLock</h4>
<pre>public&nbsp;boolean&nbsp;tryLock(long&nbsp;timeout,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Acquires the lock if it is not held by another thread within the given
 waiting time and the current thread has not been
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupted</a>.

 <p>If the current thread already holds this lock then the hold count
 is incremented by one and the method returns immediately without
 incrementing the sequence number.

 <p>If this lock not held by another thread, this method
 increments the sequence number (which thus becomes an odd
 number), sets the lock hold count to one, and returns
 immediately.

 <p>If the lock is held by another thread then the current
 thread may retry acquiring this lock, depending on the <code>spin</code> count established in constructor.  If the lock is still
 not acquired, the current thread becomes disabled for thread
 scheduling purposes and lies dormant until one of three things
 happens:

 <ul>

 <li>The lock is acquired by the current thread; or

 <li>Some other thread <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupts</a>
 the current thread; or

 <li>The specified waiting time elapses

 </ul>

 <p>If the lock is acquired then the value <code>true</code> is returned and
 the lock hold count is set to one.

 <p>If the current thread:

 <ul>

 <li>has its interrupted status set on entry to this method; or

 <li>is <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#interrupt()" title="class or interface in java.lang">interrupted</a> while
 acquiring the lock,

 </ul>
 then <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang"><code>InterruptedException</code></a> is thrown and the current thread's
 interrupted status is cleared.

 <p>If the specified waiting time elapses then the value <code>false</code>
 is returned.  If the time is less than or equal to zero, the method
 will not wait at all.

 <p>In this implementation, as this method is an explicit
 interruption point, preference is given to responding to the
 interrupt over normal or reentrant acquisition of the lock, and
 over reporting the elapse of the waiting time.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true#tryLock(long, java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent.locks">tryLock</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - the time to wait for the lock</dd><dd><code>unit</code> - the time unit of the timeout argument</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the lock was free and was acquired by the
         current thread, or the lock was already held by the current
         thread; and <code>false</code> if the waiting time elapsed before
         the lock could be acquired</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the current thread is interrupted</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if the time unit is null</dd></dl>
</li>
</ul>
<a name="unlock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>unlock</h4>
<pre>public&nbsp;void&nbsp;unlock()</pre>
<div class="block">Attempts to release this lock.

 <p>If the current thread is the holder of this lock then the
 hold count is decremented.  If the hold count is now zero then
 the sequence number is incremented (thus becoming an even
 number) and the lock is released.  If the current thread is not
 the holder of this lock then <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalMonitorStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalMonitorStateException</code></a> is thrown.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true#unlock()" title="class or interface in java.util.concurrent.locks">unlock</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalMonitorStateException.html?is-external=true" title="class or interface in java.lang">IllegalMonitorStateException</a></code> - if the current thread does not
         hold this lock</dd></dl>
</li>
</ul>
<a name="newCondition()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newCondition</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html?is-external=true" title="class or interface in java.util.concurrent.locks">Condition</a>&nbsp;newCondition()</pre>
<div class="block">Throws UnsupportedOperationException. SequenceLocks
 do not support Condition objects.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true#newCondition()" title="class or interface in java.util.concurrent.locks">newCondition</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - always</dd></dl>
</li>
</ul>
<a name="getHoldCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHoldCount</h4>
<pre>public&nbsp;long&nbsp;getHoldCount()</pre>
<div class="block">Queries the number of holds on this lock by the current thread.

 <p>A thread has a hold on a lock for each lock action that is not
 matched by an unlock action.

 <p>The hold count information is typically only used for testing and
 debugging purposes.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the number of holds on this lock by the current thread,
         or zero if this lock is not held by the current thread</dd></dl>
</li>
</ul>
<a name="isHeldByCurrentThread()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isHeldByCurrentThread</h4>
<pre>public&nbsp;boolean&nbsp;isHeldByCurrentThread()</pre>
<div class="block">Queries if this lock is held by the current thread.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if current thread holds this lock and
         <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="isLocked()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLocked</h4>
<pre>public&nbsp;boolean&nbsp;isLocked()</pre>
<div class="block">Queries if this lock is held by any thread. This method is
 designed for use in monitoring of the system state,
 not for synchronization control.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if any thread holds this lock and
         <code>false</code> otherwise</dd></dl>
</li>
</ul>
<a name="getOwner()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOwner</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;getOwner()</pre>
<div class="block">Returns the thread that currently owns this lock, or
 <code>null</code> if not owned. When this method is called by a
 thread that is not the owner, the return value reflects a
 best-effort approximation of current lock status. For example,
 the owner may be momentarily <code>null</code> even if there are
 threads trying to acquire the lock but have not yet done so.
 This method is designed to facilitate construction of
 subclasses that provide more extensive lock monitoring
 facilities.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the owner, or <code>null</code> if not owned</dd></dl>
</li>
</ul>
<a name="hasQueuedThreads()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasQueuedThreads</h4>
<pre>public final&nbsp;boolean&nbsp;hasQueuedThreads()</pre>
<div class="block">Queries whether any threads are waiting to acquire this lock. Note that
 because cancellations may occur at any time, a <code>true</code>
 return does not guarantee that any other thread will ever
 acquire this lock.  This method is designed primarily for use in
 monitoring of the system state.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> if there may be other threads waiting to
         acquire the lock</dd></dl>
</li>
</ul>
<a name="hasQueuedThread(java.lang.Thread)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasQueuedThread</h4>
<pre>public final&nbsp;boolean&nbsp;hasQueuedThread(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;thread)</pre>
<div class="block">Queries whether the given thread is waiting to acquire this
 lock. Note that because cancellations may occur at any time, a
 <code>true</code> return does not guarantee that this thread
 will ever acquire this lock.  This method is designed primarily for use
 in monitoring of the system state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>thread</code> - the thread</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the given thread is queued waiting for this lock</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html?is-external=true" title="class or interface in java.lang">NullPointerException</a></code> - if the thread is null</dd></dl>
</li>
</ul>
<a name="getQueueLength()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueueLength</h4>
<pre>public final&nbsp;int&nbsp;getQueueLength()</pre>
<div class="block">Returns an estimate of the number of threads waiting to
 acquire this lock.  The value is only an estimate because the number of
 threads may change dynamically while this method traverses
 internal data structures.  This method is designed for use in
 monitoring of the system state, not for synchronization
 control.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the estimated number of threads waiting for this lock</dd></dl>
</li>
</ul>
<a name="getQueuedThreads()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueuedThreads</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html?is-external=true" title="class or interface in java.util">Collection</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&gt;&nbsp;getQueuedThreads()</pre>
<div class="block">Returns a collection containing threads that may be waiting to
 acquire this lock.  Because the actual set of threads may change
 dynamically while constructing this result, the returned
 collection is only a best-effort estimate.  The elements of the
 returned collection are in no particular order.  This method is
 designed to facilitate construction of subclasses that provide
 more extensive monitoring facilities.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the collection of threads</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">Returns a string identifying this lock, as well as its lock state.
 The state, in brackets, includes either the String <code>"Unlocked"</code>
 or the String <code>"Locked by"</code> followed by the
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true#getName()" title="class or interface in java.lang">name</a> of the owning thread.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a string identifying this lock, as well as its lock state</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SequenceLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../jersey/repackaged/jsr166e/extra/ReadMostlyVector.Action.html" title="interface in jersey.repackaged.jsr166e.extra"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?jersey/repackaged/jsr166e/extra/SequenceLock.html" target="_top">Frames</a></li>
<li><a href="SequenceLock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2007-2014,                             <a href="http://www.oracle.com">Oracle</a>                             and/or its affiliates.                             All Rights Reserved. Use is subject to license terms.</small></p>
</body>
</html>
